(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{54:function(t,e,n){},56:function(t,e,n){},83:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(0),s=n.n(r),c=n(23),i=n.n(c),o=(n(54),n(55),n(20)),j=n(8),h=n(9),l=n(11),u=n(10),d=(n.p,n(56),n(14)),p=n.n(d);function b(t){return Object(a.jsx)("div",{children:t.projects.map((function(t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:t.title}),Object(a.jsx)("p",{children:t.description})]},t._id)}))})}var O=n(17),m=n(86),g=n(85),x=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={title:"",description:""},t.handleChange=function(e){var n=e.target.name,a=e.target.value;t.setState(Object(O.a)({},n,a))},t.handleSubmit=function(e){e.preventDefault(),console.log(t.state),p.a.post("/api/projects",{title:t.state.title,description:t.state.description}).then((function(){t.setState({title:"",description:""}),t.props.getData()})).catch((function(t){return console.log(t)}))},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"title",children:"Title: "}),Object(a.jsx)(m.a.Control,{type:"text",id:"title",name:"title",value:this.state.title,onChange:this.handleChange})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"description",children:"Description: "}),Object(a.jsx)(m.a.Control,{type:"text",id:"description",name:"description",value:this.state.description,onChange:this.handleChange})]}),Object(a.jsx)(g.a,{type:"submit",children:"Add a Project"})]})}}]),n}(r.Component),f=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={projects:[]},t.getData=function(){t.setState({projects:[{name:"Google",description:"Build a search engine"},{name:"Instagram",description:"Build a photo sharing application"}]})},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"projects-container",children:[Object(a.jsx)(x,{getData:this.getData}),Object(a.jsx)(b,{projects:this.state.projects})]})}}]),n}(r.Component),v=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(j.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Edit project"}),Object(a.jsxs)(m.a,{onSubmit:this.props.handleSubmit,children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"title",children:"Title: "}),Object(a.jsx)(m.a.Control,{type:"text",id:"title",name:"title",value:this.props.title,onChange:this.props.handleChange})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"description",children:"Description: "}),Object(a.jsx)(m.a.Control,{type:"text",id:"description",name:"description",value:this.props.description,onChange:this.props.handleChange})]}),Object(a.jsx)(g.a,{type:"submit",children:"Update Project"})]})]})}}]),n}(r.Component),C=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={project:null,editForm:!1,error:null,title:"",description:""},t.getData=function(){var e=t.props.match.params.id;p.a.get("/api/projects/".concat(e)).then((function(e){console.log(e),t.setState({project:e.data,title:e.data.title,description:e.data.description})})).catch((function(e){console.log(e.response),404===e.response.status&&t.setState({error:"Sorry - Project Not found \ud83e\udd37\u200d\u2640\ufe0f \ud83e\udd37\u200d\u2642\ufe0f"})}))},t.componentDidMount=function(){t.getData()},t.deleteProject=function(){var e=t.props.match.params.id;p.a.delete("/api/projects/".concat(e)).then((function(){t.props.history.push("/projects")}))},t.toggleEditForm=function(){t.setState((function(t){return{editForm:!t.editForm}}))},t.handleChange=function(e){var n=e.target,a=n.name,r=n.value;t.setState(Object(O.a)({},a,r))},t.handleSubmit=function(e){e.preventDefault();var n=t.props.match.params.id;p.a.put("/api/projects/".concat(n),{title:t.state.title,description:t.state.description}).then((function(e){t.setState({project:e.data,title:e.data.title,description:e.data.description,editForm:!1})})).catch((function(t){console.log(t)}))},t}return Object(h.a)(n,[{key:"render",value:function(){if(this.state.error)return Object(a.jsx)("h1",{children:this.state.error});if(!this.state.project)return Object(a.jsx)("h1",{children:"Loading..."});var t=!1,e=this.props.user,n=this.state.project.owner;return e&&e._id===n&&(t=!0),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:this.state.project.title}),Object(a.jsx)("p",{children:this.state.project.description}),t&&Object(a.jsx)(g.a,{variant:"danger",onClick:this.deleteProject,children:"Delete Project"}),Object(a.jsx)(g.a,{onClick:this.toggleEditForm,children:"Show Edit Form"}),this.state.editForm&&Object(a.jsx)(v,Object(o.a)(Object(o.a)({},this.state),{},{handleChange:this.handleChange,handleSubmit:this.handleSubmit}))]})}}]),n}(r.Component),y=n(88),S=function(t,e){return p.a.post("/api/auth/signup",{username:t,password:e}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},w=function(t,e){return p.a.post("/api/auth/login",{username:t,password:e}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},F=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={username:"",password:"",message:""},t.handleChange=function(e){var n=e.target,a=n.name,r=n.value;t.setState(Object(O.a)({},a,r))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,a=n.username,r=n.password;S(a,r).then((function(e){e.message?t.setState({message:e.message,username:"",password:""}):(t.props.setUser(e),t.props.history.push("/projects"))}))},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Signup"}),Object(a.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"username",children:"Username: "}),Object(a.jsx)(m.a.Control,{type:"text",name:"username",id:"username",value:this.state.username,onChange:this.handleChange})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"password",children:"Password: "}),Object(a.jsx)(m.a.Control,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})]}),this.state.message&&Object(a.jsx)(y.a,{variant:"danger",children:this.state.message}),Object(a.jsx)(g.a,{type:"submit",children:"Signup"})]})]})}}]),n}(r.Component),D=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={username:"",password:"",message:""},t.handleChange=function(e){var n=e.target,a=n.name,r=n.value;t.setState(Object(O.a)({},a,r))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,a=n.username,r=n.password;w(a,r).then((function(e){e.message?t.setState({message:e.message,username:"",password:""}):(t.props.setUser(e),t.props.history.push("/projects"))}))},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Login"}),Object(a.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"username",children:"Username: "}),Object(a.jsx)(m.a.Control,{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{htmlFor:"password",children:"Password: "}),Object(a.jsx)(m.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})]}),this.state.message&&Object(a.jsx)(y.a,{variant:"danger",children:this.state.message}),Object(a.jsx)(g.a,{type:"submit",children:"Login"})]})]})}}]),n}(r.Component),L=n(18),k=n(87),U=function(t){console.log(t),p.a.delete("/api/auth/logout").then((function(t){return t.data})).catch((function(t){return t.response.data})).then((function(){t.setUser(null)}))};function P(t){return Object(a.jsxs)(k.a,{className:"nav justify-content-end",bg:"primary",children:[Object(a.jsx)(k.a.Brand,{children:Object(a.jsx)(L.b,{to:"/",children:"Home"})}),t.user?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k.a.Brand,{children:Object(a.jsx)(L.b,{to:"/projects",children:"Projects"})}),Object(a.jsx)(k.a.Brand,{children:Object(a.jsx)(L.b,{to:"/",onClick:function(){return U(t)},children:"Logout"})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k.a.Brand,{children:Object(a.jsx)(L.b,{to:"/signup",children:"Signup"})}),Object(a.jsx)(k.a.Brand,{children:Object(a.jsx)(L.b,{to:"/login",children:"Login"})})]})]})}function B(){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"This is the home page \ud83e\udd8a"})})}var G=n(6),A=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={user:t.props.user},t.setUser=function(e){t.setState({user:e})},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(P,{user:this.state.user,setUser:this.setUser}),Object(a.jsx)(G.b,{exact:!0,path:"/",component:B}),Object(a.jsx)(G.b,{exact:!0,path:"/projects",render:function(e){return t.state.user?Object(a.jsx)(f,Object(o.a)({},e)):Object(a.jsx)(G.a,{to:"/"})}}),Object(a.jsx)(G.b,{exact:!0,path:"/projects/:id",render:function(e){return Object(a.jsx)(C,Object(o.a)({user:t.state.user},e))}}),Object(a.jsx)(G.b,{exact:!0,path:"/signup",render:function(e){return Object(a.jsx)(F,Object(o.a)({setUser:t.setUser},e))}}),Object(a.jsx)(G.b,{exact:!0,path:"/login",render:function(e){return Object(a.jsx)(D,Object(o.a)({setUser:t.setUser},e))}})]})}}]),n}(s.a.Component),E=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),a(t),r(t),s(t),c(t)}))};p.a.get("/api/auth/loggedin").then((function(t){var e=t.data;i.a.render(Object(a.jsx)(L.a,{children:Object(a.jsx)(A,{user:e})}),document.getElementById("root"))})),E()}},[[83,1,2]]]);
//# sourceMappingURL=main.ee872e0e.chunk.js.map